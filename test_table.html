<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabulator Example</title>
    <link href="https://unpkg.com/tabulator-tables/dist/css/tabulator.min.css" rel="stylesheet">
</head>
<body>
    <div id="example-table"></div>
    <button id="add-row-button">Add Row</button>
    <button id="load-data-button">Load Data</button>
    <button id="save-data-button">Save Data</button>
    <script type="text/javascript" src="https://unpkg.com/tabulator-tables/dist/js/tabulator.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Retrieve data from local storage or use an empty array if no data exists
            var tableData = JSON.parse(localStorage.getItem('tabulatorData')) || [];

            var table = new Tabulator("#example-table", {
                data: tableData,
                layout: "fitColumns",
                responsiveLayout: "hide",
                addRowPos: "top",
                history: true,
                pagination: "local",
                paginationSize: 7,
                paginationCounter: "rows",
                movableColumns: true,
                initialSort: [
                    { column: "name", dir: "asc" }
                ],
                columnDefaults: {
                    tooltip: true
                },
                columns: [
                    { title: "Name", field: "name", editor: "input" },
                    { title: "Task Progress", field: "progress", hozAlign: "left", formatter: "progress", editor: true },
                    { title: "Gender", field: "gender", width: 95, editor: "select", editorParams: { values: ["male", "female"] } },
                    { title: "Rating", field: "rating", formatter: "star", hozAlign: "center", width: 100, editor: true },
                    { title: "Color", field: "col", width: 130, editor: "input" },
                    { title: "Date Of Birth", field: "dob", width: 130, sorter: "date", hozAlign: "center" },
                    { title: "Driver", field: "car", width: 90, hozAlign: "center", formatter: "tickCross", sorter: "boolean", editor: true },
                    { title: "Example", field: "example", editor: "textarea", editorParams: {
                        elementAttributes: {
                            maxlength: "10"
                        },
                        mask: "AAA-999",
                        selectContents: true,
                        verticalNavigation: "editor",
                        shiftEnterSubmit: true
                    } }
                ]
            });

            // Function to handle adding a new row to the table
            function addNewRow() {
                var newRowData = { id: table.getDataCount() + 1, name: '', progress: 0, gender: '', rating: 0, col: '', dob: '', car: false, example: '' };
                table.addRow(newRowData, true, "top"); // Add new row to the top of the table

                // Update local storage with current table data
                localStorage.setItem('tabulatorData', JSON.stringify(table.getData()));
            }

            // Event listener for the "Add Row" button
            document.getElementById('add-row-button').addEventListener('click', function() {
                addNewRow();
            });

            // Event listener for the "Load Data" button
            document.getElementById('load-data-button').addEventListener('click', function() {
                // Retrieve data from local storage
                var savedData = JSON.parse(localStorage.getItem('tabulatorData')) || [];
                table.setData(savedData);
            });

            // Event listener for the "Save Data" button
            document.getElementById('save-data-button').addEventListener('click', function() {
                // Get current table data
                var currentData = table.getData();

                // Save data to local storage
                localStorage.setItem('tabulatorData', JSON.stringify(currentData));
            });
        });
    </script>
</body>
</html>
